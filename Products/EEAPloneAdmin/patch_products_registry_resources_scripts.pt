<tal:scripts define="view context/@@resourceregistries_scripts_view;
                     https python: 'https' in context.absolute_url()"
             repeat="script view/scripts">

    <tal:script_https condition='https'>
        <tal:item repeat="script view/scripts">
            <tal:block define="inline script/inline;
                            condcomment script/conditionalcomment">
                <tal:wcondcomment tal:condition="condcomment">
                    <tal:opencc tal:replace="structure string:&lt;!--[if ${condcomment}]&gt;" />
                </tal:wcondcomment>

                <tal:no-inline condition="not:inline">
                    <script type="text/javascript" tal:attributes="src python:script['src'].replace('http', 'https')"></script>
                </tal:no-inline>

                <tal:inline condition="inline">
                    <script type="text/javascript" tal:content="structure style/content"></script>
                </tal:inline>
                
                <tal:wcondcomment tal:condition="condcomment">
                    <tal:closecc tal:replace="structure string:&lt;![endif]--&gt;" />
                </tal:wcondcomment>
            </tal:block>
        </tal:item>
    </tal:script_https>

    <tal:script_http condition='not:https' repeat="script view/scripts">
        <tal:block define="inline script/inline;
                         condcomment script/conditionalcomment">
            <tal:wcondcomment tal:condition="condcomment">
                <tal:opencc tal:replace="structure string:&lt;!--[if ${condcomment}]&gt;" />
            </tal:wcondcomment>

            <tal:no-inline condition="not:inline">
                <script type="text/javascript" tal:attributes="src python:script['src']"></script>
            </tal:no-inline>

            <tal:inline condition="inline">
                <script type="text/javascript" tal:content="structure script/content"></script>
            </tal:inline>
            
            <tal:wcondcomment tal:condition="condcomment">
                <tal:closecc tal:replace="structure string:&lt;![endif]--&gt;" />
            </tal:wcondcomment>
        </tal:block>
    </tal:script_http>


    </tal:scripts>

